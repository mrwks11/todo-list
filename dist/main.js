(()=>{const t=document.querySelector("[data-project-list]"),e=document.querySelector("[data-new-project-form"),n=document.querySelector("[data-new-project-input"),o=document.querySelector("[data-task-list-container]"),r=document.querySelector("[data-project-title"),a=(document.querySelector("[data-task-list]"),"projects"),c="selectedProjectId";let i=JSON.parse(localStorage.getItem(a))||[],l=localStorage.getItem(c);function s(){!function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}(t),i.forEach((e=>{const n=document.createElement("li");n.dataset.projectId=e.id,n.classList.add("project-list-item"),n.innerText=e.title,e.id==l&&n.classList.add("active-project");const o=document.createElement("button");o.setAttribute("data-project-remove-button",""),o.classList.add("button","project-remove-button"),o.innerText="X",n.appendChild(o),t.appendChild(n)}));const e=i.find((t=>t.id==l));null===l?o.innerHTML="<h2>Nothing to display, because no project is selected.</h2>":(o.style.display="",r.innerText=e.title)}function d(){localStorage.setItem(a,JSON.stringify(i)),localStorage.setItem(c,l)}e.addEventListener("submit",(t=>{t.preventDefault();const e=n.value;if(null===e||""===e)return;const o=function(t){return{title:t,id:(new Date).valueOf(),tasks:[]}}(e);n.value=null,i.push(o),d(),s()})),t.addEventListener("click",(t=>{t.target.classList.contains("project-list-item")&&(l=t.target.dataset.projectId,d(),s())})),t.addEventListener("click",(t=>{var e;t.target.classList.contains("project-remove-button")&&(i.filter((t=>{t.id!==l&&(l=null)})),t.target.parentElement.remove(),e=t.target,i.forEach(((t,n)=>{t.id==e.parentElement.dataset.projectId&&i.splice(n,1)})),localStorage.setItem("projects",JSON.stringify(i)),d(),s())})),document.addEventListener("DOMContentLoaded",s)})();