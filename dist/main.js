(()=>{const t=document.querySelector("[data-project-list]"),e=document.querySelector("[data-new-project-form"),n=document.querySelector("[data-new-project-title-input]"),a=document.querySelector("[data-task-list-container]"),o=document.querySelector("[data-project-title"),l=document.querySelector("[data-task-list]"),r=(document.querySelector("[data-task-count"),document.querySelector("[data-new-task-form]")),c=document.querySelector("[data-new-task-title-input]"),i=document.querySelector("[data-new-task-description-input]"),s=document.querySelector("[data-new-task-date-input]"),d=document.querySelector("[data-new-task-time-input]"),u=document.querySelector("[data-new-task-priority-input]"),m="projects",p="selectedProjectId";let v=JSON.parse(localStorage.getItem(m))||[],f=localStorage.getItem(p);function g(){k(t),v.forEach((e=>{const n=document.createElement("li");n.dataset.projectId=e.id,n.classList.add("project-list-item"),n.innerText=e.title,e.id==f&&n.classList.add("active-project");const a=document.createElement("button");a.setAttribute("data-project-remove-button",""),a.classList.add("button","project-remove-button"),a.innerText="X",n.appendChild(a),t.appendChild(n)}));const e=v.find((t=>t.id==f));console.log(e),null===f||null==f?a.innerHTML="<h2>No project selected.</h2>":(a.style.display="",o.innerText=e.title),k(l),function(t){t.tasks.forEach((t=>{const e=document.createElement("li");e.dataset.taskId=t.id,e.classList.add("task-list-item"),e.innerText=t.title;const n=document.createElement("button");n.setAttribute("data-task-remove-button",""),n.classList.add("button","task-remove-button"),n.innerText="X",e.appendChild(n),l.appendChild(e)}))}(e)}function k(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function S(){n.value=null,c.value=null,i.value=null,i.value=null,s.value=null,u.value=null}function y(){localStorage.setItem(m,JSON.stringify(v)),localStorage.setItem(p,f)}e.addEventListener("submit",(t=>{t.preventDefault();const e=n.value;if(null===e||""===e)return;const a=function(t){return{title:t,id:(new Date).valueOf(),tasks:[]}}(e);S(),v.push(a),y(),g()})),t.addEventListener("click",(t=>{t.target.classList.contains("project-list-item")&&(f=t.target.dataset.projectId,y(),g())})),t.addEventListener("click",(t=>{var e;t.target.classList.contains("project-remove-button")&&(v.filter((t=>{t.id!==f&&(f=null)})),t.target.parentElement.remove(),e=t.target,v.forEach(((t,n)=>{t.id==e.parentElement.dataset.projectId&&v.splice(n,1)})),localStorage.setItem("projects",JSON.stringify(v)),y(),g())})),r.addEventListener("submit",(t=>{t.preventDefault();const e=c.value,n=i.value,a=s.value,o=d.value,l=u.value;if(null===e||""===e)return;const r=function(t,e,n,a,o){return{title:t,id:(new Date).valueOf(),description:e,date:n,time:a,priority:o,complete:!1}}(e,n,a,o,l);S(),v.find((t=>t.id==f)).tasks.push(r),y(),g(),console.log(v)})),l.addEventListener("click",(t=>{t.target.classList.contains("task-list-item")&&t.target.classList.toggle("task-complete")})),document.addEventListener("DOMContentLoaded",g),console.log(v)})();